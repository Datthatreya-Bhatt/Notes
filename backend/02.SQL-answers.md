
#### What is procedure and functions in postgres ?

**What is a Function in Postgres?**
- A **function** is a reusable block of SQL or PL/pgSQL code that **returns a value**.
- You can use it in SELECT statements, WHERE clauses, etc.
- Example:  
  ```sql
  CREATE FUNCTION add_numbers(a INT, b INT) RETURNS INT AS $$
  BEGIN
    RETURN a + b;
  END;
  $$ LANGUAGE plpgsql;
  ```

**Key points:**
- Always returns something.
- Often used inside queries.
- Can be used for small calculations, formatting, or complex business logic.

---

**What is a Procedure in Postgres?**
- A **procedure** is a block of code that **does not return a value directly**.
- You call it using `CALL`, and it is mostly used for **actions**, like inserting, updating, or deleting multiple rows.
- Example:  
  ```sql
  CREATE PROCEDURE log_event(event_text TEXT) AS $$
  BEGIN
    INSERT INTO event_logs(message) VALUES (event_text);
  END;
  $$ LANGUAGE plpgsql;
  ```

**Key points:**
- Does **not return** a value directly.
- Used for doing actions or multiple steps.
- Good for batch updates, maintenance tasks, etc.

---

**Super simple way to remember:**
- üì• **Function = "Gives back a result."**
- üõ†Ô∏è **Procedure = "Just does work, no result needed."**

---
Exactly! ‚úÖ  
In PostgreSQL:

- **Functions** are **executed** (they **return** a value).
- **Procedures** are **called** (they **don't have to return** a value and they can manage transactions inside).

Let me show you **simple clear examples** side-by-side:

---

# üîπ Function Example

**1. Create a Function**
```sql
CREATE OR REPLACE FUNCTION add_numbers(a INT, b INT)
RETURNS INT
AS $$
BEGIN
    RETURN a + b;
END;
$$ LANGUAGE plpgsql;
```

**2. Execute the Function**
```sql
SELECT add_numbers(5, 7);
```
üß† **Output** will be: `12`

---
  
# üîπ Procedure Example

**1. Create a Procedure**
```sql
CREATE OR REPLACE PROCEDURE log_message(msg TEXT)
LANGUAGE plpgsql
AS $$
BEGIN
    INSERT INTO logs(message, created_at)
    VALUES (msg, NOW());
END;
$$;
```

(Assume you have a `logs` table like:)

```sql
CREATE TABLE logs (
    id SERIAL PRIMARY KEY,
    message TEXT,
    created_at TIMESTAMP
);
```

**2. Call the Procedure**
```sql
CALL log_message('Hello, this is a log entry!');
```
üß† **Result:** A new row will be inserted into the `logs` table.

---

# üî• Quick Comparison Table

| Feature        | Function                         | Procedure                       |
|----------------|----------------------------------|---------------------------------|
| Purpose        | Do calculation, return value     | Perform actions (insert/update) |
| How to Run     | `SELECT function_name()`         | `CALL procedure_name()`         |
| Can Manage Transaction? | ‚ùå No (not directly)         | ‚úÖ Yes (can COMMIT, ROLLBACK inside) |
| Returns Value? | ‚úÖ Always returns (even void)     | ‚ùå Not necessary to return      |
| Example Usage  | Calculation, business logic      | Database changes, data migration |

---

# üß† Easy way to remember:

- "Function gives a **value**" ‚Üí **SELECT function_name()**
- "Procedure does an **action**" ‚Üí **CALL procedure_name()**

---

Would you also like me to show **how a Procedure can use SAVEPOINT and ROLLBACK inside**? üéØ (very powerful and useful if you're doing transactions!)  
Let me know! üöÄ


#### Show one simple example for postgres transactions.

BEGIN;  -- Step 1: Start transaction

-- Step 2: First operation
UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

-- Step 3: Set a SAVEPOINT (backup point inside transaction)
SAVEPOINT after_debit;

-- Step 4: Second operation
UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

-- Optional: If some condition fails here (ex: wrong account), you can roll back to savepoint:
-- ROLLBACK TO SAVEPOINT after_debit;

-- Step 5: Finalize the transaction
COMMIT;  -- Save all changes



#### What is SQL and NoSQL ?


#### When should we use SQL and NoSQL


#### What is difference between truncate and delete in sql?

#### What is indexing and What are the different type of indexing and How to create it ?

#### What is the advantage and disadvantage of indexing.

#### What are views and triggers And How to create it, why we need views and triggers?

#### WHat are joins ? What are the different types of Joins ?

#### Write query showing different kinds of joins.

#### What is sharding in SQL ?

#### What is BLOB in SQL ?

#### What are constraints, explain any 5 of them.

#### What is UNIQUE constraints ?

#### What are primary keys and foreign keys.When to use what ? Explain with an example.

#### What is the difference between primary key and unique key?

#### What is a subquery? What are its various types?


#### What is the use of UNION keyword in SQL? Write an example query.

#### What are Entities and Relationship (ER)?


#### What are the different types of relationships between tables, which are there?


#### What is the difference between truncate, delete, drop?


#### If we drop table what else will be deleted with it.

#### What is the difference between IN and BETWEEN?

#### What is the ACID property in a database? Explain each one of them.

#### What is a deadlock in SQL?


#### Is a blank space or zero the same as a NULL value?

#### What is the usage of the NVL() function?

#### What is SQL Injection?

#### What is BLOB and TEXT in MySQL?

#### In SQL what is primary key and foreign key?

#### what are transactions and what is its uses?


#### How to delete a column in SQL? Please write the query.















